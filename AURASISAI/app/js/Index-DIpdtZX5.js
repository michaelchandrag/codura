import{k as Y,l as d,y as Q,i as w,j as z,b as e,n as _,w as h,z as me,h as R,A as ve,e as k,c,B as C,t as I,C as he,T as fe,D as ge,r as b,a as be,o as ye,E as A,G as D,H as _e,I as xe,x as Ae,f as we,F as M,g as S,u as v,v as N,J as ke,K as Ce,L as Be,_ as Fe,M as Oe}from"./index-B05NeBuP.js";const Te="/assets/img/message-add.png",Me="/assets/img/send-red.png";(function(){try{var t=document.createElement("style");t.appendChild(document.createTextNode(".vs-focus-container__focus-redirector,.vs-focus-container__last-focusable{opacity:0;position:absolute}.vs-focus-container__content{outline:none}.vs-modal{font-size:.875em}.vs-modal.is-aligned-top .vs-modal__wrapper{vertical-align:initial}.vs-modal.is-aligned-top.has-footer .vs-modal__body,.vs-modal.has-footer .vs-modal__body{max-height:calc(100vh - 125px)}.vs-modal:not(.has-footer) .vs-modal__body{padding:0 24px 20px}.vs-modal--is-open{overflow:hidden}.vs-modal.is-backdrop-blur{backdrop-filter:blur(3px)}.vs-modal__mask{display:table;position:fixed;z-index:800;top:0;left:0;width:100%;height:100vh;transition:opacity .3s ease;background-color:#33333380}.vs-modal__wrapper{display:table-cell;overflow-x:hidden;text-align:center;vertical-align:middle}.vs-modal__wrapper.has-dummy-scrollbar{overflow-y:scroll}.vs-modal__container{display:inline-block;position:relative;width:530px;max-width:100vw;max-height:100vh;margin:0 auto;padding:0;overflow:hidden;transition:all .3s ease;border-radius:3px;outline:none;background-color:#fff;box-shadow:0 2px 8px #33333354;text-align:initial}.vs-modal__header{display:flex;position:relative;z-index:1;align-items:center;min-height:55px;padding:0 24px}.vs-modal__header-text{display:flex;flex-grow:1;align-items:center;margin:0;font-size:1.125em;font-weight:400}.vs-modal__close-button button{position:absolute;z-index:100;top:20px;right:20px;background:none;border:none;text-align:right;margin:0;padding:0;cursor:pointer}.vs-modal__close-button button img{width:12px;height:12px}.vs-modal__body{max-height:calc(100vh - 55px);padding:16px 24px;overflow-y:auto}.vs-modal__footer{display:flex;align-items:center;justify-content:flex-end;height:70px;padding:0 24px}.vs-modal--size-s>.vs-modal__wrapper>.vs-modal__container{width:320px}.vs-modal--size-l>.vs-modal__wrapper>.vs-modal__container{width:850px}.vs-modal--size-fullscreen>.vs-modal__wrapper>.vs-modal__container{width:100vw;border-radius:0}.vs-modal--size-fullscreen>.vs-modal__wrapper>.vs-modal__container .vs-modal__body{height:100vh;max-height:100vh}.vs-modal--size-auto>.vs-modal__wrapper>.vs-modal__container{width:initial}.vs-modal--transition-fade-enter-from,.vs-modal--transition-fade-leave-active,.vs-modal--transition-slide-up-enter-from,.vs-modal--transition-slide-up-leave-active{opacity:0}.vs-modal--transition-slide-up-enter-from .vs-modal__container,.vs-modal--transition-slide-up-leave-active .vs-modal__container{transform:translateY(20px)}.vs-modal--transition-slide-down-enter-from,.vs-modal--transition-slide-down-leave-active{opacity:0}.vs-modal--transition-slide-down-enter-from .vs-modal__container,.vs-modal--transition-slide-down-leave-active .vs-modal__container{transform:translateY(-20px)}")),document.head.appendChild(t)}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();const J=(t,o)=>{const a=t.__vccOpts||t;for(const[p,r]of o)a[p]=r;return a},$e={name:"VsFocusContainer",props:{containFocus:{type:Boolean,default:!0},focusRedirector:Function,disabled:{type:Boolean,default:!1},tag:{type:String,default:"div"},lazy:{type:Boolean,default:!1}},computed:{renderRedirector(){return this.disabled?!1:this.lazy?this.containFocus:!0}},methods:{focus(){this.$refs.content.focus()},redirectFocus(t,o){if(!this.containFocus){this.$emit("focus-overflow",t,o);return}if(t.stopPropagation(),this.focusRedirector){this.focusRedirector(t,o);return}o.isTabbingForward?this.$refs.content.focus():this.$refs.lastFocusable.focus()}}},He={ref:"content",class:"vs-focus-container__content",tabindex:"-1"},Ee={key:1,ref:"lastFocusable",class:"vs-focus-container__last-focusable",tabindex:"-1"};function Se(t,o,a,p,r,n){return d(),Q(ge(a.tag),{class:"vs-focus-container"},{default:w(()=>[n.renderRedirector?(d(),c("span",{key:0,class:"vs-focus-container__focus-redirector",tabindex:"0",onFocus:o[0]||(o[0]=u=>n.redirectFocus(u,{isTabbingForward:!1}))},null,32)):k("",!0),e("div",He,[C(t.$slots,"default")],512),!a.disabled&&a.containFocus?(d(),c("span",Ee,null,512)):k("",!0),n.renderRedirector?(d(),c("span",{key:2,class:"vs-focus-container__focus-redirector",tabindex:"0",onFocus:o[1]||(o[1]=u=>n.redirectFocus(u,{isTabbingForward:!0}))},null,32)):k("",!0)]),_:3})}const ze=J($e,[["render",Se]]),G=/^\s+|\s+$/g,P=/\s+/g;function Re(t){return t&&typeof t=="object"&&typeof t.nodeName=="string"&&t.nodeType===1}function W(t){return typeof HTMLElement=="object"?t instanceof HTMLElement:Re(t)}function j(t){return W(t)?(t.getAttribute("class")||"").replace(G,"").split(P):[]}function $(t){return typeof t=="string"?t.replace(G,"").split(P):t}function L(t,o){W(t)&&t.setAttribute("class",$(o).join(" "))}function Z(t,o){const a=j(t);return $(o).forEach(p=>{const r=a.indexOf(p);r!==-1&&a.splice(r,1)}),L(t,a),a}function Ie(t,o){const a=Z(t,o),p=$(o);return a.push(...p),L(t,a),a}function U(t,o){const a=j(t);return $(o).every(p=>a.indexOf(p)!==-1)}const K={add:Ie,remove:Z,contains:U,has:U,set:L,get:j},je="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAGFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABWNxwqAAAAB3RSTlMAJeTmmCIcbPbyAQAAAOtJREFUSMeF1ksKwjAURuE6cF50BY4cC4oLEHQquAVXYIVs3wiFn3C4nA76SG+/PpLc2+l9fk7lsr3dp0c71QH79p2ubZmr85t+sgshCHTh1UIQaJe+DkFgmddNBZyyLYGRIAACAAgA2SeAAwI5OowBu/WaEJ95AI4BQBD4N6xEgFyQFsSTYDgJAmgkkFYCIACAAABiAEgAABGgIAIURICCCFAQAEAQYIDewh9SX9M/lH5q7yztbh8wOuR80Oqw94mjU88nr05/TyCagjyJaRr0RKqp2JO5lgMvKFqStKhpWbTC6qVZi7v+HvwAcK2oz9BduqwAAAAASUVORK5CYII=",Le={name:"VsModal",components:{VsFocusContainer:ze},props:{title:{type:String,default:"Modal title"},alignTop:{type:Boolean,default:!1},alignTopMargin:{type:Number,default:60},size:{type:String,default:"m"},role:{type:String,default:"dialog"},transition:{type:String,default:"slide-up"},removeHeader:{type:Boolean,default:!1},removeCloseButton:{type:Boolean,default:!1},preventShift:{type:Boolean,default:!1},dismissible:{type:Boolean,default:!0},dismissOn:{type:String,default:"backdrop esc close-button"},backdropBlur:{type:Boolean,default:!1}},data(){return{isOpen:!1,lastFocusedElement:null}},computed:{classes(){return[`vs-modal--size-${this.size}`,{"has-footer":this.hasFooter},{"is-open":this.isOpen},{"is-aligned-top":this.alignTop},{"is-backdrop-blur":this.backdropBlur}]},alignTopStyle(){return this.alignTop?{"padding-top":`${this.alignTopMargin}px`}:null},toggleTransition(){return`vs-modal--transition-${this.transition}`},hasFooter(){return!!this.$slots.footer},dismissOnBackdrop(){return this.dismissOn.indexOf("backdrop")>-1},dismissOnCloseButton(){return this.dismissOn.indexOf("close-button")>-1},dismissOnEsc(){return this.dismissOn.indexOf("esc")>-1}},watch:{isOpen(){this.$nextTick(()=>{this[this.isOpen?"onOpen":"onClose"]()})}},beforeDestroy(){this.isOpen&&this.returnFocus()},methods:{open(){this.isOpen=!0},close(){!this.dismissible||(this.isOpen=!1)},redirectFocus(){this.$refs.focusContainer.focus()},returnFocus(){this.lastFocusedElement&&this.lastFocusedElement.focus()},onBackdropClick(){this.dismissOnBackdrop?this.close():this.redirectFocus()},onEsc(){this.dismissOnEsc&&this.close()},onOpen(){this.lastFocusedElement=document.activeElement,this.$refs.focusContainer.focus(),K.add(document.body,"vs-modal--is-open"),this.incrementOpenModalCount(),this.$emit("open")},onClose(){this.$emit("close"),this.returnFocus()},onEnter(){this.$emit("reveal")},onLeave(){this.$emit("hide"),this.decrementOpenModalCount()===0&&K.remove(document.body,"vs-modal--is-open")},getOpenModalCount(){const t=document.body.getAttribute("data-open-modals");return t===void 0?0:Number(t)},setOpenModalCount(t){const o=Math.max(0,t);return o===0?document.body.removeAttribute("data-open-modals"):document.body.setAttribute("data-open-modals",o),o},incrementOpenModalCount(){return this.setOpenModalCount(this.getOpenModalCount()+1)},decrementOpenModalCount(){return this.setOpenModalCount(this.getOpenModalCount()-1)}}},Ve=["role"],qe={key:0,class:"vs-modal__header"},De={class:"vs-modal__header-text"},Ne={class:"vs-modal__close-button"},Ue=e("img",{src:je,alt:"close"},null,-1),Ke=[Ue],Ye={class:"vs-modal__body"},Qe={key:1,class:"vs-modal__footer"};function Je(t,o,a,p,r,n){const u=Y("vs-focus-container");return d(),Q(fe,{name:n.toggleTransition,onAfterEnter:n.onEnter,onAfterLeave:n.onLeave},{default:w(()=>[z(e("div",{class:_(["vs-modal vs-modal__mask",n.classes]),role:a.role,onClick:o[2]||(o[2]=h((...m)=>n.onBackdropClick&&n.onBackdropClick(...m),["self"]))},[e("div",{class:_(["vs-modal__wrapper",{"has-dummy-scrollbar":a.preventShift}]),style:me(n.alignTopStyle),onClick:o[1]||(o[1]=h((...m)=>n.onBackdropClick&&n.onBackdropClick(...m),["self"]))},[R(u,{ref:"focusContainer",class:"vs-modal__container",tabindex:"-1",onKeydown:ve(h(n.onEsc,["stop"]),["native","esc"])},{default:w(()=>[a.removeHeader?k("",!0):(d(),c("div",qe,[C(t.$slots,"header",{},()=>[e("h2",De,I(a.title),1)])])),e("div",Ne,[C(t.$slots,"close",{},()=>[n.dismissOnCloseButton&&!a.removeCloseButton&&a.dismissible?(d(),c("button",{key:0,onClick:o[0]||(o[0]=(...m)=>n.close&&n.close(...m))},Ke)):k("",!0)])]),e("div",Ye,[C(t.$slots,"default")]),n.hasFooter?(d(),c("div",Qe,[C(t.$slots,"footer")])):k("",!0)]),_:3},8,["onKeydown"])],6)],10,Ve),[[he,r.isOpen]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])}const Ge=J(Le,[["render",Je]]),Pe={class:"section bg-transparent ai-section section-content"},We={class:"container-ai px-3"},Ze={class:"row gy-4 justify-content-center content-ai"},Xe={class:"ai-logo mb-2 d-flex align-items-center justify-content-between"},et={class:"card border-0 ai-history-content"},tt={class:"ai-content-header border-0 card-header bg-transparent py-3 d-flex justify-content-between align-items-center"},st={id:"ai-history-body",class:"card-body text-start"},ot=["onClick"],nt={class:"m-0 text-white fs-13px fw-300"},at={class:"d-inline-flex gap-1 ws-25"},it=["onClick"],lt=["onClick"],rt={class:"col-lg-9 ai-message-sidebar"},dt={class:"card h-100 card-conversation border-0"},ct={class:"ai-content-header card-header bg-transparent py-3 d-flex justify-content-between align-items-center border-light"},ut={class:"d-inline-flex gap-2"},pt={key:0},mt={class:"col-lg-8 m-auto"},vt={class:"row"},ht={class:"col-lg-6"},ft={class:"card bg-dark mb-3"},gt=["onClick"],bt={class:"card-body text-center p-3"},yt={class:"m-0 fs-12px text-lighter"},_t=["innerHTML"],xt={id:"ai-message-footer",class:"card-footer py-4 border-0 bg-transparent"},At={class:"col-lg-8 m-auto"},wt={class:"input-group input-group-lg rounded-sm shadow"},kt=["disabled"],Ct={key:0,class:"spinner-border spinner-border-sm text-secondary",role:"status"},Bt={key:1,src:Me},Ft={class:"modal-body mt-2"},Tt={__name:"Index",setup(t){const o=Ce(),a=Be(),p=b(o.query.text);let r=b([]),n=b([]),u=b(-1),m=be({index:null,title:""}),H=b(null);const B=b(null);let y=b(""),x=b(!1);const X=b(50);ye(async()=>{const i=A.getters.stateChatHistory;if(i&&i.length)n.value=i;else if(D.length){let s=[];D.forEach(async(g,l)=>{const f={key:`chat-default-${Date.now()}`,title:g,messages:[]};s.push(f),await A.commit("addChatHistory",f)}),n.value=s}p.value&&(y.value=p.value,await E()),ee(),F()});const ee=()=>{Object.keys(o.query).length>0&&a.replace({path:o.path})},F=()=>{_e(()=>{B.value&&(B.value.scrollTop=B.value.scrollHeight)})},te=async i=>{y.value=i,await E()},E=async()=>{if(!y.value.trim()||x.value)return;x.value=!0,r.value.push({role:"user",content:y.value}),F();const i=r.value.slice(-1).map(g=>({role:g.role,content:g.content})),s=await xe(i);s&&(s.success?(y.value="",await se({role:"assistant",content:s.respone})):Ae({type:"warning",text:s.msg}),x.value=!1)},se=async i=>{const s=r.value.length;r.value.push({...i,content:""}),F(),await oe(i,s),await ne()};async function oe(i,s){const g=i.content;r.value[s].content="";for(let l=0;l<g.length;l++)r.value[s].content+=g[l],await new Promise(f=>setTimeout(f,X.value))}const ne=async()=>{if(u.value==-1){const i={key:`chat-${Date.now()}`,title:`Chat ${n.value.length+1}`,messages:r.value};await A.commit("addChatHistory",i),u.value=n.value.length}else ae()},ae=async()=>{await A.commit("updateChatMessageHistory",{key:u.value,messages:r.value})},V=async i=>{u.value=i,r.value=n.value[`${u.value}`].messages,O.value=!1,F()},ie=async i=>{m.index=i,m.title=n.value[i].title,le()},le=i=>{H.value.open()},re=()=>{H.value.close()},de=async()=>{await A.commit("updateChatTitleHistory",{key:m.index,title:m.title}),re()},ce=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/```(.*?)\n([\s\S]*?)```/g,(f,T,pe)=>`<pre><code class="language-${T}">${pe.trim()}</code></pre>`).replace(/`([^`]+)`/g,'<code class="attribute">$1</code>').replace(/\n/g,"<br>"),O=b(!1);function q(){O.value=!O.value}async function ue(){r.value=[],u.value=-1,n.value=[],await A.commit("destroyChatHistory")}return(i,s)=>{const g=Y("router-link");return d(),c(M,null,[e("section",Pe,[e("div",We,[e("div",Ze,[e("div",{class:_(["col-lg-3 ai-history-sidebar",{"is-show":O.value}])},[e("div",Xe,[R(g,{to:{name:"home"}},{default:w(()=>s[5]||(s[5]=[e("img",{src:Fe,class:"md"},null,-1)])),_:1}),s[6]||(s[6]=e("a",{class:"btn btn-sm"},[e("img",{src:Te})],-1))]),e("div",et,[s[10]||(s[10]=we('<div class="ai-search p-3"><form><div class="input-group m-0 rounded-sm bg-dark-light"><span class="input-group-text bg-transparent text-lighter border-0"><i class="bi bi-search"></i></span><input class="ps-0 fs-12px form-control form-control-md bg-transparent border-0 no-shadow text-white" placeholder="Search..."></div></form></div>',1)),e("div",tt,[s[7]||(s[7]=e("h6",{class:"m-0 text-white fs-13px fw-300 ls-xs text-uppercase"},"History",-1)),e("a",{onClick:s[0]||(s[0]=h(l=>{q()},["prevent"])),class:"d-xl-none d-lg-none btn btn-sm py-0 px-2 text-white"},"Close")]),e("div",st,[(d(!0),c(M,null,S(v(n),(l,f)=>(d(),c("div",{key:l.key,class:_([{"bg-dark":v(u)==f},"ai-history-item d-flex mb-1 align-items-center justify-content-between py-1 px-2 rounded-sm"])},[e("a",{href:"#",onClick:h(T=>V(f),["prevent"]),class:"ps-1 ws-75"},[e("p",nt,I(l.title),1)],8,ot),e("div",at,[e("a",{href:"#",onClick:h(T=>ie(f),["prevent"]),class:"btn btn-sm"},s[8]||(s[8]=[e("i",{class:"text-white bi bi-pencil"},null,-1)]),8,it),e("a",{onClick:h(T=>V(f),["prevent"]),href:"#",class:"btn btn-sm"},s[9]||(s[9]=[e("i",{class:"text-white bi bi-chevron-right"},null,-1)]),8,lt)])],2))),128))])])],2),e("div",rt,[e("div",dt,[e("div",ct,[s[12]||(s[12]=e("h6",{class:"m-0 text-white ls-xs"},"Ask Anything",-1)),e("div",ut,[e("a",{onClick:s[1]||(s[1]=h(l=>{ue()},["prevent"])),class:"btn btn-sm py-0 px-2 text-lighter fs-11px"},s[11]||(s[11]=[e("i",{class:"bi bi-arrow-repeat"},null,-1),e("span",{class:"ms-1"},"Clear Chat",-1)])),e("a",{onClick:s[2]||(s[2]=h(l=>{q()},["prevent"])),class:"d-xl-none d-lg-none btn btn-sm py-0 px-2 text-white fs-11px"},"History")])]),e("div",{id:"ai-message-body",ref_key:"chatbox",ref:B,class:"card-body text-start"},[v(r).length?(d(!0),c(M,{key:1},S(v(r),l=>(d(),c("div",{class:_([{"is-me":l.role=="user"},"ai-message-item d-flex mb-1"])},[e("p",{class:_([{"px-3":l.role=="user"},"m-0 text-white fs-12px bubble py-2 rounded-sm"]),innerHTML:ce(l.content)},null,10,_t)],2))),256)):(d(),c("div",pt,[e("div",mt,[s[13]||(s[13]=e("h6",{class:"text-center text-white mb-3 p-2"},"What can I help with?",-1)),e("div",vt,[(d(!0),c(M,null,S(v(Oe),l=>(d(),c("div",ht,[e("div",ft,[e("a",{href:"#",onClick:h(f=>te(l),["prevent"])},[e("div",bt,[e("p",yt,I(l),1)])],8,gt)])]))),256))])])]))],512),e("div",xt,[e("div",At,[e("form",{onSubmit:h(E,["prevent"])},[e("div",wt,[z(e("input",{id:"ai-message-prompt","onUpdate:modelValue":s[3]||(s[3]=l=>ke(y)?y.value=l:y=l),required:"",class:"form-control form-control-sm fs-12px text-white bg-transparent",placeholder:"Let the magic begin, Ask a question"},null,512),[[N,v(y)]]),e("button",{id:"ai-send-message",type:"submit",disabled:v(x),class:_([{disabled:v(x)},"btn btn-sm text-white bg-transparent input-group-text"])},[v(x)?(d(),c("span",Ct)):(d(),c("img",Bt))],10,kt)])],32)])])])])])])]),R(v(Ge),{size:"s",ref_key:"modal_change_title",ref:H},{header:w(()=>s[14]||(s[14]=[e("h6",{class:"m-0"},"Ubah Riwayat",-1)])),default:w(()=>[e("div",Ft,[e("form",{onSubmit:h(de,["prevent"])},[z(e("input",{class:"form-control",placeholder:"Input title","onUpdate:modelValue":s[4]||(s[4]=l=>v(m).title=l)},null,512),[[N,v(m).title]]),s[15]||(s[15]=e("div",{class:"d-flex justify-content-end mt-3"},[e("button",{type:"submit",class:"btn btn-sm btn-primary"},"Save Change")],-1))],32)])]),_:1},512)],64)}}};export{Tt as default};
