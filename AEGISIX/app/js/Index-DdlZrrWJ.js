import{j as Q,g as d,l as J,m as k,f as R,a as e,n as A,w as m,q as he,x as I,y as ge,b as w,c,z as C,t as j,A as be,T as ye,B as _e,C as g,r as xe,o as Ae,D as x,E as V,G as we,H as ke,u,F as $,e as z,v as U,I as Ce,J as Be,K as Fe,_ as Oe,L as Te}from"./index-DVfQBz0u.js";const $e="/assets/img/bookmark.png",Me="/assets/img/share.png",He="/assets/img/attach-circle.png",Ee="/assets/img/send-2.png";(function(){try{var s=document.createElement("style");s.appendChild(document.createTextNode(".vs-focus-container__focus-redirector,.vs-focus-container__last-focusable{opacity:0;position:absolute}.vs-focus-container__content{outline:none}.vs-modal{font-size:.875em}.vs-modal.is-aligned-top .vs-modal__wrapper{vertical-align:initial}.vs-modal.is-aligned-top.has-footer .vs-modal__body,.vs-modal.has-footer .vs-modal__body{max-height:calc(100vh - 125px)}.vs-modal:not(.has-footer) .vs-modal__body{padding:0 24px 20px}.vs-modal--is-open{overflow:hidden}.vs-modal.is-backdrop-blur{backdrop-filter:blur(3px)}.vs-modal__mask{display:table;position:fixed;z-index:800;top:0;left:0;width:100%;height:100vh;transition:opacity .3s ease;background-color:#33333380}.vs-modal__wrapper{display:table-cell;overflow-x:hidden;text-align:center;vertical-align:middle}.vs-modal__wrapper.has-dummy-scrollbar{overflow-y:scroll}.vs-modal__container{display:inline-block;position:relative;width:530px;max-width:100vw;max-height:100vh;margin:0 auto;padding:0;overflow:hidden;transition:all .3s ease;border-radius:3px;outline:none;background-color:#fff;box-shadow:0 2px 8px #33333354;text-align:initial}.vs-modal__header{display:flex;position:relative;z-index:1;align-items:center;min-height:55px;padding:0 24px}.vs-modal__header-text{display:flex;flex-grow:1;align-items:center;margin:0;font-size:1.125em;font-weight:400}.vs-modal__close-button button{position:absolute;z-index:100;top:20px;right:20px;background:none;border:none;text-align:right;margin:0;padding:0;cursor:pointer}.vs-modal__close-button button img{width:12px;height:12px}.vs-modal__body{max-height:calc(100vh - 55px);padding:16px 24px;overflow-y:auto}.vs-modal__footer{display:flex;align-items:center;justify-content:flex-end;height:70px;padding:0 24px}.vs-modal--size-s>.vs-modal__wrapper>.vs-modal__container{width:320px}.vs-modal--size-l>.vs-modal__wrapper>.vs-modal__container{width:850px}.vs-modal--size-fullscreen>.vs-modal__wrapper>.vs-modal__container{width:100vw;border-radius:0}.vs-modal--size-fullscreen>.vs-modal__wrapper>.vs-modal__container .vs-modal__body{height:100vh;max-height:100vh}.vs-modal--size-auto>.vs-modal__wrapper>.vs-modal__container{width:initial}.vs-modal--transition-fade-enter-from,.vs-modal--transition-fade-leave-active,.vs-modal--transition-slide-up-enter-from,.vs-modal--transition-slide-up-leave-active{opacity:0}.vs-modal--transition-slide-up-enter-from .vs-modal__container,.vs-modal--transition-slide-up-leave-active .vs-modal__container{transform:translateY(20px)}.vs-modal--transition-slide-down-enter-from,.vs-modal--transition-slide-down-leave-active{opacity:0}.vs-modal--transition-slide-down-enter-from .vs-modal__container,.vs-modal--transition-slide-down-leave-active .vs-modal__container{transform:translateY(-20px)}")),document.head.appendChild(s)}catch(o){console.error("vite-plugin-css-injected-by-js",o)}})();const G=(s,o)=>{const a=s.__vccOpts||s;for(const[v,r]of o)a[v]=r;return a},Se={name:"VsFocusContainer",props:{containFocus:{type:Boolean,default:!0},focusRedirector:Function,disabled:{type:Boolean,default:!1},tag:{type:String,default:"div"},lazy:{type:Boolean,default:!1}},computed:{renderRedirector(){return this.disabled?!1:this.lazy?this.containFocus:!0}},methods:{focus(){this.$refs.content.focus()},redirectFocus(s,o){if(!this.containFocus){this.$emit("focus-overflow",s,o);return}if(s.stopPropagation(),this.focusRedirector){this.focusRedirector(s,o);return}o.isTabbingForward?this.$refs.content.focus():this.$refs.lastFocusable.focus()}}},ze={ref:"content",class:"vs-focus-container__content",tabindex:"-1"},Re={key:1,ref:"lastFocusable",class:"vs-focus-container__last-focusable",tabindex:"-1"};function Ie(s,o,a,v,r,n){return d(),J(_e(a.tag),{class:"vs-focus-container"},{default:k(()=>[n.renderRedirector?(d(),c("span",{key:0,class:"vs-focus-container__focus-redirector",tabindex:"0",onFocus:o[0]||(o[0]=p=>n.redirectFocus(p,{isTabbingForward:!1}))},null,32)):w("",!0),e("div",ze,[C(s.$slots,"default")],512),!a.disabled&&a.containFocus?(d(),c("span",Re,null,512)):w("",!0),n.renderRedirector?(d(),c("span",{key:2,class:"vs-focus-container__focus-redirector",tabindex:"0",onFocus:o[1]||(o[1]=p=>n.redirectFocus(p,{isTabbingForward:!0}))},null,32)):w("",!0)]),_:3})}const je=G(Se,[["render",Ie]]),P=/^\s+|\s+$/g,W=/\s+/g;function qe(s){return s&&typeof s=="object"&&typeof s.nodeName=="string"&&s.nodeType===1}function Z(s){return typeof HTMLElement=="object"?s instanceof HTMLElement:qe(s)}function q(s){return Z(s)?(s.getAttribute("class")||"").replace(P,"").split(W):[]}function M(s){return typeof s=="string"?s.replace(P,"").split(W):s}function D(s,o){Z(s)&&s.setAttribute("class",M(o).join(" "))}function X(s,o){const a=q(s);return M(o).forEach(v=>{const r=a.indexOf(v);r!==-1&&a.splice(r,1)}),D(s,a),a}function De(s,o){const a=X(s,o),v=M(o);return a.push(...v),D(s,a),a}function K(s,o){const a=q(s);return M(o).every(v=>a.indexOf(v)!==-1)}const Y={add:De,remove:X,contains:K,has:K,set:D,get:q},Le="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAGFBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABWNxwqAAAAB3RSTlMAJeTmmCIcbPbyAQAAAOtJREFUSMeF1ksKwjAURuE6cF50BY4cC4oLEHQquAVXYIVs3wiFn3C4nA76SG+/PpLc2+l9fk7lsr3dp0c71QH79p2ubZmr85t+sgshCHTh1UIQaJe+DkFgmddNBZyyLYGRIAACAAgA2SeAAwI5OowBu/WaEJ95AI4BQBD4N6xEgFyQFsSTYDgJAmgkkFYCIACAAABiAEgAABGgIAIURICCCFAQAEAQYIDewh9SX9M/lH5q7yztbh8wOuR80Oqw94mjU88nr05/TyCagjyJaRr0RKqp2JO5lgMvKFqStKhpWbTC6qVZi7v+HvwAcK2oz9BduqwAAAAASUVORK5CYII=",Ne={name:"VsModal",components:{VsFocusContainer:je},props:{title:{type:String,default:"Modal title"},alignTop:{type:Boolean,default:!1},alignTopMargin:{type:Number,default:60},size:{type:String,default:"m"},role:{type:String,default:"dialog"},transition:{type:String,default:"slide-up"},removeHeader:{type:Boolean,default:!1},removeCloseButton:{type:Boolean,default:!1},preventShift:{type:Boolean,default:!1},dismissible:{type:Boolean,default:!0},dismissOn:{type:String,default:"backdrop esc close-button"},backdropBlur:{type:Boolean,default:!1}},data(){return{isOpen:!1,lastFocusedElement:null}},computed:{classes(){return[`vs-modal--size-${this.size}`,{"has-footer":this.hasFooter},{"is-open":this.isOpen},{"is-aligned-top":this.alignTop},{"is-backdrop-blur":this.backdropBlur}]},alignTopStyle(){return this.alignTop?{"padding-top":`${this.alignTopMargin}px`}:null},toggleTransition(){return`vs-modal--transition-${this.transition}`},hasFooter(){return!!this.$slots.footer},dismissOnBackdrop(){return this.dismissOn.indexOf("backdrop")>-1},dismissOnCloseButton(){return this.dismissOn.indexOf("close-button")>-1},dismissOnEsc(){return this.dismissOn.indexOf("esc")>-1}},watch:{isOpen(){this.$nextTick(()=>{this[this.isOpen?"onOpen":"onClose"]()})}},beforeDestroy(){this.isOpen&&this.returnFocus()},methods:{open(){this.isOpen=!0},close(){!this.dismissible||(this.isOpen=!1)},redirectFocus(){this.$refs.focusContainer.focus()},returnFocus(){this.lastFocusedElement&&this.lastFocusedElement.focus()},onBackdropClick(){this.dismissOnBackdrop?this.close():this.redirectFocus()},onEsc(){this.dismissOnEsc&&this.close()},onOpen(){this.lastFocusedElement=document.activeElement,this.$refs.focusContainer.focus(),Y.add(document.body,"vs-modal--is-open"),this.incrementOpenModalCount(),this.$emit("open")},onClose(){this.$emit("close"),this.returnFocus()},onEnter(){this.$emit("reveal")},onLeave(){this.$emit("hide"),this.decrementOpenModalCount()===0&&Y.remove(document.body,"vs-modal--is-open")},getOpenModalCount(){const s=document.body.getAttribute("data-open-modals");return s===void 0?0:Number(s)},setOpenModalCount(s){const o=Math.max(0,s);return o===0?document.body.removeAttribute("data-open-modals"):document.body.setAttribute("data-open-modals",o),o},incrementOpenModalCount(){return this.setOpenModalCount(this.getOpenModalCount()+1)},decrementOpenModalCount(){return this.setOpenModalCount(this.getOpenModalCount()-1)}}},Ve=["role"],Ue={key:0,class:"vs-modal__header"},Ke={class:"vs-modal__header-text"},Ye={class:"vs-modal__close-button"},Qe=e("img",{src:Le,alt:"close"},null,-1),Je=[Qe],Ge={class:"vs-modal__body"},Pe={key:1,class:"vs-modal__footer"};function We(s,o,a,v,r,n){const p=Q("vs-focus-container");return d(),J(ye,{name:n.toggleTransition,onAfterEnter:n.onEnter,onAfterLeave:n.onLeave},{default:k(()=>[R(e("div",{class:A(["vs-modal vs-modal__mask",n.classes]),role:a.role,onClick:o[2]||(o[2]=m((...f)=>n.onBackdropClick&&n.onBackdropClick(...f),["self"]))},[e("div",{class:A(["vs-modal__wrapper",{"has-dummy-scrollbar":a.preventShift}]),style:he(n.alignTopStyle),onClick:o[1]||(o[1]=m((...f)=>n.onBackdropClick&&n.onBackdropClick(...f),["self"]))},[I(p,{ref:"focusContainer",class:"vs-modal__container",tabindex:"-1",onKeydown:ge(m(n.onEsc,["stop"]),["native","esc"])},{default:k(()=>[a.removeHeader?w("",!0):(d(),c("div",Ue,[C(s.$slots,"header",{},()=>[e("h2",Ke,j(a.title),1)])])),e("div",Ye,[C(s.$slots,"close",{},()=>[n.dismissOnCloseButton&&!a.removeCloseButton&&a.dismissible?(d(),c("button",{key:0,onClick:o[0]||(o[0]=(...f)=>n.close&&n.close(...f))},Je)):w("",!0)])]),e("div",Ge,[C(s.$slots,"default")]),n.hasFooter?(d(),c("div",Pe,[C(s.$slots,"footer")])):w("",!0)]),_:3},8,["onKeydown"])],6)],10,Ve),[[be,r.isOpen]])]),_:3},8,["name","onAfterEnter","onAfterLeave"])}const Ze=G(Ne,[["render",We]]),Xe={class:"section bg-transparent ai-section section-content p-0"},et={class:"container-ai px-3"},tt={class:"row gy-4 justify-content-center content-ai"},st={class:"ai-history-header mb-2 d-flex align-items-center justify-content-between px-4 pt-2"},ot={class:"card border-0 ai-history-content"},nt={key:0,class:"ai-search p-3"},at={class:"ai-content-header border-0 card-header bg-transparent py-3 d-flex justify-content-between align-items-center"},it={class:"d-inline-flex gap-2"},lt={id:"ai-history-body",class:"card-body text-start pt-0"},rt=["onClick"],dt={class:"m-0 text-dark fs-12px"},ct={class:"d-inline-flex gap-1 ws-25"},ut=["onClick"],pt=["onClick"],mt={class:"col-lg-9 ai-message-sidebar p-0"},vt={class:"card h-100 card-conversation border-0"},ft={class:"ai-content-header card-header bg-transparent py-3 d-flex justify-content-between align-items-center border-light"},ht={class:"d-inline-flex gap-3"},gt={key:0},bt={class:"col-lg-8 m-auto"},yt={class:"row"},_t={class:"col-lg-6"},xt={class:"card bg-white mb-3"},At=["onClick"],wt={class:"card-body text-center p-3"},kt={class:"m-0 fs-12px text-dark"},Ct=["innerHTML"],Bt={id:"ai-message-footer",class:"card-footer py-3 border-0"},Ft={class:"col-lg-10 m-auto"},Ot={class:"input-group input-group-lg rounded-md py-2 shadow"},Tt={class:"input-group-text border-0 bg-transparent"},$t=["disabled"],Mt={class:"input-group-text border-0 bg-transparent"},Ht=["disabled"],Et={key:0,class:"spinner-border spinner-border-sm text-secondary",role:"status"},St={key:1,src:Ee},zt={class:"modal-body mt-2"},It={__name:"Index",setup(s){const o=Be(),a=Fe(),v=g(o.query.text);let r=g([]),n=g([]),p=g(-1),f=xe({index:null,title:""}),H=g(null);const B=g(null);let y=g(""),_=g(!1);const ee=g(50);let E=g(!1);Ae(async()=>{const i=x.getters.stateChatHistory;if(i&&i.length)n.value=i;else if(V.length){let t=[];V.forEach(async(b,l)=>{const h={key:`chat-default-${Date.now()}`,title:b,messages:[]};t.push(h),await x.commit("addChatHistory",h)}),n.value=t}v.value&&(y.value=v.value,await S()),te(),F()});const te=()=>{Object.keys(o.query).length>0&&a.replace({path:o.path})},F=()=>{we(()=>{B.value&&(B.value.scrollTop=B.value.scrollHeight)})};function se(){E.value=!E.value}const oe=async()=>{const i={key:`chat-${Date.now()}`,title:`Chat ${n.value.length+1}`,messages:[]};await x.commit("addChatHistory",i),p.value=n.value.length},ne=async i=>{y.value=i,await S()},S=async()=>{if(!y.value.trim()||_.value)return;_.value=!0,r.value.push({role:"user",content:y.value}),F();const i=r.value.slice(-1).map(b=>({role:b.role,content:b.content})),t=await ke(i);t&&(t.success&&(y.value="",await ae({role:"assistant",content:t.respone})),_.value=!1)},ae=async i=>{const t=r.value.length;r.value.push({...i,content:""}),F(),await ie(i,t),await le()};async function ie(i,t){const b=i.content;r.value[t].content="";for(let l=0;l<b.length;l++)r.value[t].content+=b[l],await new Promise(h=>setTimeout(h,ee.value))}const le=async()=>{if(p.value==-1){const i={key:`chat-${Date.now()}`,title:`Chat ${n.value.length+1}`,messages:r.value};await x.commit("addChatHistory",i),p.value=n.value.length}else re()},re=async()=>{await x.commit("updateChatMessageHistory",{key:p.value,messages:r.value})},L=async i=>{p.value=i,r.value=n.value[`${p.value}`].messages,O.value=!1,F()},de=async i=>{f.index=i,f.title=n.value[i].title,ce()},ce=i=>{H.value.open()},ue=()=>{H.value.close()},pe=async()=>{await x.commit("updateChatTitleHistory",{key:f.index,title:f.title}),ue()},me=i=>i.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/```(.*?)\n([\s\S]*?)```/g,(h,T,fe)=>`<pre><code class="language-${T}">${fe.trim()}</code></pre>`).replace(/`([^`]+)`/g,'<code class="attribute">$1</code>').replace(/\n/g,"<br>"),O=g(!1);function N(){O.value=!O.value}async function ve(){r.value=[],p.value=-1,n.value=[],await x.commit("destroyChatHistory")}return(i,t)=>{const b=Q("router-link");return d(),c($,null,[e("section",Xe,[e("div",et,[e("div",tt,[e("div",{class:A(["col-lg-3 ai-history-sidebar p-0",{"is-show":O.value}])},[e("div",st,[I(b,{to:{name:"home"}},{default:k(()=>t[5]||(t[5]=[e("img",{src:Oe},null,-1)])),_:1}),e("a",{onClick:m(oe,["prevent"]),class:"btn btn-sm rounded text-white px-3"},t[6]||(t[6]=[e("i",{class:"bi bi-plus"},null,-1),e("span",{class:"fs-13px"},"New Chat",-1)])),e("a",{onClick:m(se,["prevent"]),class:"btn btn-sm rounded text-white"},t[7]||(t[7]=[e("i",{class:"bi bi-search"},null,-1)]))]),e("div",ot,[u(E)?(d(),c("div",nt,t[8]||(t[8]=[e("form",null,[e("div",{class:"input-group m-0 rounded-sm bg-transparent border shadow"},[e("span",{class:"input-group-text bg-transparent text-dark-lighter border-0"},[e("i",{class:"bi bi-search"})]),e("input",{class:"ps-0 fs-12px form-control form-control-md bg-transparent border-0 no-shadow text-dark",placeholder:"Search..."})])],-1)]))):w("",!0),e("div",at,[t[9]||(t[9]=e("h6",{class:"m-0 text-dark fs-11px fw-300 ls-xs text-uppercase"},"Your conversations",-1)),e("div",it,[e("a",{onClick:t[0]||(t[0]=m(l=>{ve()},["prevent"])),class:"btn btn-sm py-0 px-2 text-primary fs-11px"},"Clear All"),e("a",{onClick:t[1]||(t[1]=m(l=>{N()},["prevent"])),class:"d-xl-none d-lg-none btn btn-sm py-0 px-2 text-dark"},"Close")])]),e("div",lt,[(d(!0),c($,null,z(u(n),(l,h)=>(d(),c("div",{key:l.key,class:A([{"bg-dark":u(p)==h},"ai-history-item d-flex mb-1 align-items-center justify-content-between py-1 px-0 rounded-sm"])},[t[12]||(t[12]=e("div",{class:"d-inline-flex gap-1 ws-5 ps-1"},[e("i",{class:"bi bi-chat-dots"})],-1)),e("a",{href:"#",onClick:m(T=>L(h),["prevent"]),class:"ps-3 ws-70"},[e("p",dt,j(l.title),1)],8,rt),e("div",ct,[e("a",{href:"#",onClick:m(T=>de(h),["prevent"]),class:"btn btn-sm"},t[10]||(t[10]=[e("i",{class:"text-dark bi bi-pencil"},null,-1)]),8,ut),e("a",{onClick:m(T=>L(h),["prevent"]),href:"#",class:"btn btn-sm"},t[11]||(t[11]=[e("i",{class:"text-dark bi bi-chevron-right"},null,-1)]),8,pt)])],2))),128))])])],2),e("div",mt,[e("div",vt,[e("div",ft,[t[15]||(t[15]=e("h6",{class:"m-0 text-dark ls-xs"},"Ask Anything",-1)),e("div",ht,[t[13]||(t[13]=e("a",{class:"btn btn-sm py-1 px-1 text-dark fs-11px border"},[e("img",{src:$e})],-1)),t[14]||(t[14]=e("a",{class:"btn btn-sm py-1 px-1 text-dark fs-11px border"},[e("img",{src:Me})],-1)),e("a",{onClick:t[2]||(t[2]=m(l=>{N()},["prevent"])),class:"d-xl-none d-lg-none btn btn-sm py-0 px-2 text-dark fs-11px"},"History")])]),e("div",{id:"ai-message-body",ref_key:"chatbox",ref:B,class:"card-body text-start"},[u(r).length?(d(!0),c($,{key:1},z(u(r),l=>(d(),c("div",{class:A([{"is-me":l.role=="user"},"ai-message-item d-flex mb-1"])},[e("p",{class:"px-3 m-0 text-dark fs-12px bubble py-2 rounded-sm",innerHTML:me(l.content)},null,8,Ct)],2))),256)):(d(),c("div",gt,[e("div",bt,[t[16]||(t[16]=e("h6",{class:"text-center text-dark mb-3 p-2"},"What can I help with?",-1)),e("div",yt,[(d(!0),c($,null,z(u(Te),l=>(d(),c("div",_t,[e("div",xt,[e("a",{href:"#",onClick:m(h=>ne(l),["prevent"])},[e("div",wt,[e("p",kt,j(l),1)])],8,At)])]))),256))])])]))],512),e("div",Bt,[e("div",Ft,[e("form",{onSubmit:m(S,["prevent"])},[e("div",Ot,[e("div",Tt,[e("a",{disabled:u(_),class:A([{disabled:u(_)},"text-dark"])},t[17]||(t[17]=[e("img",{src:He},null,-1)]),10,$t)]),R(e("input",{id:"ai-message-prompt","onUpdate:modelValue":t[3]||(t[3]=l=>Ce(y)?y.value=l:y=l),required:"",class:"form-control form-control-sm fs-12px text-dark ps-0 bg-transparent",placeholder:"Whatâ€™s in your mind?..."},null,512),[[U,u(y)]]),e("div",Mt,[e("button",{id:"ai-send-message",type:"submit",disabled:u(_),class:A([{disabled:u(_)},"text-dark ai-action-message"])},[u(_)?(d(),c("span",Et)):(d(),c("img",St))],10,Ht)])])],32)])])])])])])]),I(u(Ze),{size:"s",ref_key:"modal_change_title",ref:H},{header:k(()=>t[18]||(t[18]=[e("h6",{class:"m-0"},"Ubah Riwayat",-1)])),default:k(()=>[e("div",zt,[e("form",{onSubmit:m(pe,["prevent"])},[R(e("input",{class:"form-control",placeholder:"Input title","onUpdate:modelValue":t[4]||(t[4]=l=>u(f).title=l)},null,512),[[U,u(f).title]]),t[19]||(t[19]=e("div",{class:"d-flex justify-content-end mt-3"},[e("button",{type:"submit",class:"btn btn-sm btn-primary"},"Save Change")],-1))],32)])]),_:1},512)],64)}}};export{It as default};
